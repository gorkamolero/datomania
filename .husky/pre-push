#!/bin/sh
# Deploy to Vercel after push completes
# Only deploys to production when pushing to main

branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$branch" = "main" ]; then
  (
    sleep 3
    git fetch origin main --quiet
    local_sha=$(git rev-parse HEAD)
    remote_sha=$(git rev-parse origin/main)

    if [ "$local_sha" = "$remote_sha" ]; then
      echo "ðŸš€ Deploying to Vercel..."
      vercel --prod
    fi
  ) &
fi
